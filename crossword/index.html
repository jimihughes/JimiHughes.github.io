<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crossword Puzzle — Jimi Hughes</title>
<meta name="description" content="Interactive crossword puzzle with clues, hints, check answers, and keyboard navigation. Built by Jimi Hughes.">
<link rel="icon" type="image/svg+xml" href="../favicon.svg">
<meta property="og:title" content="Crossword Puzzle — Jimi Hughes">
<meta property="og:description" content="Interactive crossword with clues, hints, check answers, and keyboard navigation.">
<meta property="og:url" content="https://jimihughes.com/crossword/">
<meta property="og:type" content="website">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#f5f5f5;--card:#fff;--text:#222;--muted:#888;--accent:#4f6ef7;--accent-light:#e8edff;--correct:#d4edda;--incorrect:#f8d7da;--border:#ddd;--black:#222;--radius:10px}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--text);min-height:100vh}
.container{max-width:960px;margin:0 auto;padding:20px}
h1{text-align:center;font-size:24px;font-weight:700;margin-bottom:4px}
.timer-bar{text-align:center;font-size:14px;color:var(--muted);margin-bottom:16px}

.toolbar{display:flex;justify-content:center;gap:8px;margin-bottom:20px;flex-wrap:wrap}
.btn{padding:8px 18px;border:1px solid var(--border);border-radius:8px;background:var(--card);color:var(--text);font-size:13px;font-weight:600;cursor:pointer;font-family:inherit;transition:all 0.2s}
.btn:hover{border-color:var(--accent);color:var(--accent)}
.btn-primary{background:var(--accent);color:#fff;border-color:var(--accent)}
.btn-primary:hover{background:#3b5de7}

.game-layout{display:flex;gap:24px;align-items:flex-start}
.grid-wrap{flex-shrink:0}

/* Grid */
.grid{display:inline-grid;gap:0;border:2px solid var(--black)}
.cell{width:36px;height:36px;border:1px solid var(--border);position:relative;display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:700;text-transform:uppercase;cursor:pointer;background:var(--card);transition:background 0.15s}
.cell.black{background:var(--black);cursor:default;border-color:var(--black)}
.cell.selected{background:var(--accent-light)}
.cell.highlighted{background:#f0f0ff}
.cell.correct-cell{background:var(--correct)}
.cell.incorrect-cell{background:var(--incorrect)}
.cell-number{position:absolute;top:1px;left:2px;font-size:9px;font-weight:700;color:var(--muted);line-height:1}
.cell-letter{font-size:16px;font-weight:700;color:var(--text)}

/* Clues */
.clues-panel{flex:1;min-width:0}
.clues-section{margin-bottom:20px}
.clues-title{font-size:14px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:8px;padding-bottom:4px;border-bottom:2px solid var(--border)}
.clue{padding:6px 8px;font-size:13px;line-height:1.4;cursor:pointer;border-radius:6px;transition:background 0.15s}
.clue:hover{background:var(--accent-light)}
.clue.active{background:var(--accent-light);font-weight:600}
.clue-num{font-weight:700;color:var(--accent);margin-right:4px}

@media(max-width:700px){
  .game-layout{flex-direction:column;align-items:center}
  .cell{width:30px;height:30px;font-size:14px}
  .cell-number{font-size:7px}
  .clues-panel{width:100%}
  h1{font-size:20px}
}
@media(max-width:400px){
  .cell{width:26px;height:26px;font-size:12px}
  .container{padding:12px}
}
</style>
</head>
<body>
<div class="container">
  <h1>Crossword Puzzle</h1>
  <div class="timer-bar" id="timer">0:00</div>
  <div class="toolbar">
    <button class="btn" id="hintBtn">Hint</button>
    <button class="btn" id="checkBtn">Check</button>
    <button class="btn" id="revealBtn">Reveal</button>
    <button class="btn btn-primary" id="newBtn">New Puzzle</button>
  </div>
  <div class="game-layout">
    <div class="grid-wrap" id="gridWrap"></div>
    <div class="clues-panel" id="cluesPanel"></div>
  </div>
</div>
<script>
(function(){
'use strict';

const WORDS=[
  {word:"PYTHON",clue:"Popular programming language named after a snake"},
  {word:"OCEAN",clue:"Vast body of salt water"},
  {word:"GUITAR",clue:"Six-stringed musical instrument"},
  {word:"PLANET",clue:"Earth is one of these"},
  {word:"BRIDGE",clue:"Structure spanning a river"},
  {word:"CASTLE",clue:"Medieval fortified building"},
  {word:"FOREST",clue:"Large area covered with trees"},
  {word:"SILVER",clue:"Precious metal, atomic number 47"},
  {word:"ROCKET",clue:"Vehicle for space travel"},
  {word:"CAMERA",clue:"Device for taking photographs"},
  {word:"TRAVEL",clue:"Going from one place to another"},
  {word:"MARKET",clue:"Place where goods are sold"},
  {word:"WINTER",clue:"Coldest season of the year"},
  {word:"ISLAND",clue:"Land surrounded by water"},
  {word:"GARDEN",clue:"Area for growing flowers or vegetables"},
  {word:"DESERT",clue:"Hot dry sandy region"},
  {word:"MUSEUM",clue:"Building for historical exhibits"},
  {word:"RABBIT",clue:"Small furry animal with long ears"},
  {word:"SIMPLE",clue:"Easy, not complicated"},
  {word:"CANDLE",clue:"Wax stick that gives light when lit"},
  {word:"PENCIL",clue:"Writing tool with graphite"},
  {word:"LAPTOP",clue:"Portable computer"},
  {word:"SUNSET",clue:"When the sun goes down"},
  {word:"COFFEE",clue:"Popular caffeinated drink"},
  {word:"JUNGLE",clue:"Dense tropical forest"},
  {word:"STREAM",clue:"Small narrow river"},
  {word:"WINDOW",clue:"Glass opening in a wall"},
  {word:"THRONE",clue:"Seat for a king or queen"},
  {word:"SPHINX",clue:"Mythical creature with a lion's body"},
  {word:"ANCHOR",clue:"Heavy device to moor a ship"},
  {word:"TUNNEL",clue:"Underground passage"},
  {word:"SHADOW",clue:"Dark area produced by blocking light"},
  {word:"BREEZE",clue:"Gentle wind"},
  {word:"METEOR",clue:"Space rock burning in the atmosphere"},
  {word:"TEMPLE",clue:"Place of worship"},
  {word:"PIRATE",clue:"Sea robber"},
  {word:"SHIELD",clue:"Protective barrier carried in battle"},
  {word:"SALMON",clue:"Pink fish that swims upstream"},
  {word:"VELVET",clue:"Soft luxurious fabric"},
  {word:"MIRROR",clue:"Reflective glass surface"},
];

let gridSize=0;
let grid=[];
let solution=[];
let numbers=[];
let placedWords=[];
let selectedCell=null;
let direction='across';
let timerSeconds=0;
let timerInterval=null;

function shuffle(arr){
  const a=[...arr];
  for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}
  return a;
}

function generateCrossword(){
  const words=shuffle(WORDS).slice(0,15);
  words.sort((a,b)=>b.word.length-a.word.length);

  const size=15;
  gridSize=size;
  const g=Array.from({length:size},()=>Array(size).fill(null));
  const placed=[];

  // Place first word horizontally in middle
  const first=words[0];
  const startCol=Math.floor((size-first.word.length)/2);
  const startRow=Math.floor(size/2);
  for(let i=0;i<first.word.length;i++) g[startRow][startCol+i]=first.word[i];
  placed.push({word:first.word,clue:first.clue,row:startRow,col:startCol,dir:'across'});

  // Try placing remaining words
  for(let wi=1;wi<words.length;wi++){
    const w=words[wi];
    let bestScore=-1,bestPlace=null;

    for(const p of placed){
      for(let pi=0;pi<p.word.length;pi++){
        for(let wi2=0;wi2<w.word.length;wi2++){
          if(p.word[pi]!==w.word[wi2])continue;

          let row,col,dir;
          if(p.dir==='across'){
            dir='down';
            row=p.row-wi2;
            col=p.col+pi;
          }else{
            dir='across';
            row=p.row+pi;
            col=p.col-wi2;
          }

          if(canPlace(g,w.word,row,col,dir,size)){
            const score=countIntersections(g,w.word,row,col,dir);
            if(score>bestScore){bestScore=score;bestPlace={row,col,dir}}
          }
        }
      }
    }

    if(bestPlace){
      const{row,col,dir}=bestPlace;
      if(dir==='across'){
        for(let i=0;i<w.word.length;i++) g[row][col+i]=w.word[i];
      }else{
        for(let i=0;i<w.word.length;i++) g[row+i][col]=w.word[i];
      }
      placed.push({word:w.word,clue:w.clue,row,col,dir});
    }
  }

  // Trim grid
  let minR=size,maxR=0,minC=size,maxC=0;
  for(let r=0;r<size;r++)for(let c=0;c<size;c++){
    if(g[r][c]!==null){minR=Math.min(minR,r);maxR=Math.max(maxR,r);minC=Math.min(minC,c);maxC=Math.max(maxC,c)}
  }
  minR=Math.max(0,minR-1);maxR=Math.min(size-1,maxR+1);
  minC=Math.max(0,minC-1);maxC=Math.min(size-1,maxC+1);

  const trimH=maxR-minR+1,trimW=maxC-minC+1;
  gridSize=Math.max(trimH,trimW);
  const finalSize=gridSize;

  solution=Array.from({length:finalSize},()=>Array(finalSize).fill(null));
  for(let r=minR;r<=maxR;r++)for(let c=minC;c<=maxC;c++){
    solution[r-minR][c-minC]=g[r][c];
  }

  // Adjust placed positions
  for(const p of placed){p.row-=minR;p.col-=minC}

  // Assign numbers
  numbers=Array.from({length:finalSize},()=>Array(finalSize).fill(0));
  let num=1;
  // Collect positions that need numbers
  const needsNum=new Set();
  for(const p of placed) needsNum.add(`${p.row},${p.col}`);

  for(let r=0;r<finalSize;r++)for(let c=0;c<finalSize;c++){
    if(needsNum.has(`${r},${c}`)){numbers[r][c]=num++;
      const pw=placed.filter(p=>p.row===r&&p.col===c);
      for(const p of pw) p.num=numbers[r][c];
    }
  }

  grid=Array.from({length:finalSize},()=>Array(finalSize).fill(''));
  placedWords=placed;
}

function canPlace(g,word,row,col,dir,size){
  const len=word.length;
  if(dir==='across'){
    if(col<0||col+len>size||row<0||row>=size)return false;
    // Check cell before and after
    if(col>0&&g[row][col-1]!==null)return false;
    if(col+len<size&&g[row][col+len]!==null)return false;
    for(let i=0;i<len;i++){
      const c=col+i;
      const existing=g[row][c];
      if(existing!==null){
        if(existing!==word[i])return false;
      }else{
        // Check above and below for adjacent words
        if(row>0&&g[row-1][c]!==null)return false;
        if(row<size-1&&g[row+1][c]!==null)return false;
      }
    }
  }else{
    if(row<0||row+len>size||col<0||col>=size)return false;
    if(row>0&&g[row-1][col]!==null)return false;
    if(row+len<size&&g[row+len][col]!==null)return false;
    for(let i=0;i<len;i++){
      const r=row+i;
      const existing=g[r][col];
      if(existing!==null){
        if(existing!==word[i])return false;
      }else{
        if(col>0&&g[r][col-1]!==null)return false;
        if(col<size-1&&g[r][col+1]!==null)return false;
      }
    }
  }
  return true;
}

function countIntersections(g,word,row,col,dir){
  let count=0;
  for(let i=0;i<word.length;i++){
    const r=dir==='across'?row:row+i;
    const c=dir==='across'?col+i:col;
    if(g[r][c]===word[i])count++;
  }
  return count;
}

// ===== Rendering =====
function render(){
  const gridWrap=document.getElementById('gridWrap');
  const cluesPanel=document.getElementById('cluesPanel');

  // Grid
  let html=`<div class="grid" style="grid-template-columns:repeat(${gridSize},auto)">`;
  for(let r=0;r<gridSize;r++){
    for(let c=0;c<gridSize;c++){
      const isFilled=solution[r][c]!==null;
      const num=numbers[r][c];
      const letter=grid[r][c];
      const cls=isFilled?'cell':'cell black';
      html+=`<div class="${cls}" data-r="${r}" data-c="${c}">`;
      if(num)html+=`<span class="cell-number">${num}</span>`;
      if(isFilled)html+=`<span class="cell-letter">${letter}</span>`;
      html+=`</div>`;
    }
  }
  html+=`</div>`;
  gridWrap.innerHTML=html;

  // Clues
  const across=placedWords.filter(w=>w.dir==='across').sort((a,b)=>a.num-b.num);
  const down=placedWords.filter(w=>w.dir==='down').sort((a,b)=>a.num-b.num);

  let chtml=`<div class="clues-section"><div class="clues-title">Across</div>`;
  for(const w of across){
    chtml+=`<div class="clue" data-num="${w.num}" data-dir="across"><span class="clue-num">${w.num}.</span>${w.clue}</div>`;
  }
  chtml+=`</div><div class="clues-section"><div class="clues-title">Down</div>`;
  for(const w of down){
    chtml+=`<div class="clue" data-num="${w.num}" data-dir="down"><span class="clue-num">${w.num}.</span>${w.clue}</div>`;
  }
  chtml+=`</div>`;
  cluesPanel.innerHTML=chtml;

  // Event listeners
  gridWrap.querySelectorAll('.cell:not(.black)').forEach(el=>{
    el.addEventListener('click',()=>{
      const r=parseInt(el.dataset.r),c=parseInt(el.dataset.c);
      if(selectedCell&&selectedCell.r===r&&selectedCell.c===c){
        direction=direction==='across'?'down':'across';
      }
      selectedCell={r,c};
      updateHighlight();
    });
  });

  cluesPanel.querySelectorAll('.clue').forEach(el=>{
    el.addEventListener('click',()=>{
      const num=parseInt(el.dataset.num);
      const dir=el.dataset.dir;
      const w=placedWords.find(p=>p.num===num&&p.dir===dir);
      if(w){
        direction=dir;
        selectedCell={r:w.row,c:w.col};
        updateHighlight();
      }
    });
  });
}

function updateHighlight(){
  document.querySelectorAll('.cell').forEach(el=>el.classList.remove('selected','highlighted'));
  document.querySelectorAll('.clue').forEach(el=>el.classList.remove('active'));
  if(!selectedCell)return;

  const{r,c}=selectedCell;
  // Find the word this cell belongs to in the current direction
  const word=findWord(r,c,direction)||findWord(r,c,direction==='across'?'down':'across');
  if(!word)return;
  direction=word.dir;

  // Highlight cells
  for(let i=0;i<word.word.length;i++){
    const cr=word.dir==='across'?word.row:word.row+i;
    const cc=word.dir==='across'?word.col+i:word.col;
    const el=document.querySelector(`.cell[data-r="${cr}"][data-c="${cc}"]`);
    if(el)el.classList.add('highlighted');
  }
  const selEl=document.querySelector(`.cell[data-r="${r}"][data-c="${c}"]`);
  if(selEl)selEl.classList.add('selected');

  // Highlight clue
  const clueEl=document.querySelector(`.clue[data-num="${word.num}"][data-dir="${word.dir}"]`);
  if(clueEl){clueEl.classList.add('active');clueEl.scrollIntoView({block:'nearest'})}
}

function findWord(r,c,dir){
  return placedWords.find(w=>{
    if(w.dir!==dir)return false;
    if(dir==='across')return w.row===r&&c>=w.col&&c<w.col+w.word.length;
    return w.col===c&&r>=w.row&&r<w.row+w.word.length;
  });
}

function moveToNext(){
  if(!selectedCell)return;
  let{r,c}=selectedCell;
  if(direction==='across')c++;else r++;
  if(r<gridSize&&c<gridSize&&solution[r]&&solution[r][c]!==null){
    selectedCell={r,c};
  }
  updateHighlight();
}

function moveToPrev(){
  if(!selectedCell)return;
  let{r,c}=selectedCell;
  if(direction==='across')c--;else r--;
  if(r>=0&&c>=0&&solution[r]&&solution[r][c]!==null){
    selectedCell={r,c};
  }
  updateHighlight();
}

// Keyboard
document.addEventListener('keydown',(e)=>{
  if(!selectedCell)return;
  const{r,c}=selectedCell;

  if(e.key==='Backspace'){
    e.preventDefault();
    if(grid[r][c]){
      grid[r][c]='';
      const el=document.querySelector(`.cell[data-r="${r}"][data-c="${c}"] .cell-letter`);
      if(el)el.textContent='';
    }else{
      moveToPrev();
      const{r:nr,c:nc}=selectedCell;
      grid[nr][nc]='';
      const el=document.querySelector(`.cell[data-r="${nr}"][data-c="${nc}"] .cell-letter`);
      if(el)el.textContent='';
    }
    return;
  }

  if(e.key==='Tab'){
    e.preventDefault();
    direction=direction==='across'?'down':'across';
    updateHighlight();
    return;
  }

  if(e.key==='ArrowRight'){e.preventDefault();selectedCell={r,c:Math.min(c+1,gridSize-1)};if(solution[selectedCell.r][selectedCell.c]===null)selectedCell={r,c};updateHighlight();return}
  if(e.key==='ArrowLeft'){e.preventDefault();selectedCell={r,c:Math.max(c-1,0)};if(solution[selectedCell.r][selectedCell.c]===null)selectedCell={r,c};updateHighlight();return}
  if(e.key==='ArrowDown'){e.preventDefault();selectedCell={r:Math.min(r+1,gridSize-1),c};if(solution[selectedCell.r][selectedCell.c]===null)selectedCell={r,c};updateHighlight();return}
  if(e.key==='ArrowUp'){e.preventDefault();selectedCell={r:Math.max(r-1,0),c};if(solution[selectedCell.r][selectedCell.c]===null)selectedCell={r,c};updateHighlight();return}

  if(/^[a-zA-Z]$/.test(e.key)){
    e.preventDefault();
    grid[r][c]=e.key.toUpperCase();
    const el=document.querySelector(`.cell[data-r="${r}"][data-c="${c}"] .cell-letter`);
    if(el)el.textContent=grid[r][c];
    moveToNext();
  }
});

// Timer
function startTimer(){
  clearInterval(timerInterval);
  timerSeconds=0;
  timerInterval=setInterval(()=>{
    timerSeconds++;
    const m=Math.floor(timerSeconds/60);
    const s=timerSeconds%60;
    document.getElementById('timer').textContent=`${m}:${String(s).padStart(2,'0')}`;
  },1000);
}

// Buttons
document.getElementById('checkBtn').addEventListener('click',()=>{
  document.querySelectorAll('.cell:not(.black)').forEach(el=>{
    const r=parseInt(el.dataset.r),c=parseInt(el.dataset.c);
    el.classList.remove('correct-cell','incorrect-cell');
    if(grid[r][c]){
      el.classList.add(grid[r][c]===solution[r][c]?'correct-cell':'incorrect-cell');
    }
  });
  setTimeout(()=>{
    document.querySelectorAll('.correct-cell,.incorrect-cell').forEach(el=>{
      el.classList.remove('correct-cell','incorrect-cell');
    });
  },2000);
});

document.getElementById('revealBtn').addEventListener('click',()=>{
  clearInterval(timerInterval);
  for(let r=0;r<gridSize;r++)for(let c=0;c<gridSize;c++){
    if(solution[r][c]!==null){
      grid[r][c]=solution[r][c];
      const el=document.querySelector(`.cell[data-r="${r}"][data-c="${c}"] .cell-letter`);
      if(el)el.textContent=solution[r][c];
    }
  }
});

document.getElementById('hintBtn').addEventListener('click',()=>{
  // Find an empty or incorrect cell and reveal it
  const emptyCells=[];
  for(let r=0;r<gridSize;r++)for(let c=0;c<gridSize;c++){
    if(solution[r][c]!==null&&grid[r][c]!==solution[r][c])emptyCells.push({r,c});
  }
  if(emptyCells.length===0)return;
  const cell=emptyCells[Math.floor(Math.random()*emptyCells.length)];
  grid[cell.r][cell.c]=solution[cell.r][cell.c];
  const el=document.querySelector(`.cell[data-r="${cell.r}"][data-c="${cell.c}"] .cell-letter`);
  if(el)el.textContent=solution[cell.r][cell.c];
});

document.getElementById('newBtn').addEventListener('click',initGame);

function initGame(){
  selectedCell=null;
  direction='across';
  generateCrossword();
  render();
  startTimer();
}

initGame();

})();
</script>
</body>
</html>
